@model FinalProject.Models.AppUser

@{
    var totalProperties = Model.Properties.Count();
    var totalBookings = Model.Reservations.Count();
    var totalReviews = Model.Reviews.Count();
    var totalProfit = Model.Properties.Sum(p => p.WeekendPrice);
}

<div class="container my-5">
    <h1 class="text-center mb-4">Welcome, @Model.FullName</h1>

    <div class="row text-center">
        <!-- Each column with Flexbox for equal heights -->
        <div class="col-md-4 mb-4 d-flex">
            <div class="card shadow-sm border-0 w-100 d-flex flex-column">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="bi bi-plus-circle mb-3" style="font-size: 2rem; color: #6c757d;"></i>
                    <h5 class="card-title">Create a New Property</h5>
                    <p class="text-muted">List new properties for your users to book.</p>
                </div>
                <div class="mt-auto p-3">
                    <a asp-controller="Property" asp-action="Create" class="btn btn-outline-primary w-100">
                        <i class="bi bi-pencil-square"></i> Create New
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 d-flex">
            <div class="card shadow-sm border-0 w-100 d-flex flex-column">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="bi bi-house mb-3" style="font-size: 2rem; color: #6c757d;"></i>
                    <h5 class="card-title">Your Properties</h5>
                    <p class="text-muted">Total Properties: <strong>@totalProperties</strong></p>
                </div>
                <div class="mt-auto p-3">
                    <a asp-controller="Account" asp-action="Reports" class="btn btn-outline-primary w-100">
                        <i class="bi bi-gear"></i> Manage Properties
                    </a>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 d-flex">
            <div class="card shadow-sm border-0 w-100 d-flex flex-column">
                <div class="card-body d-flex flex-column justify-content-center">
                    <i class="bi bi-bar-chart mb-3" style="font-size: 2rem; color: #6c757d;"></i>
                    <h5 class="card-title">Your Reports</h5>
                    <p class="text-muted">Total Bookings: <strong>@totalBookings</strong></p>
                    <p class="text-muted">Total Reviews: <strong>@totalReviews</strong></p>
                    <p class="text-muted">Total Profit: <strong>@String.Format("{0:C}", totalProfit)</strong></p>
                </div>
                <div class="mt-auto p-3">
                    <button class="btn btn-outline-primary w-100" data-toggle="collapse" data-target="#reportDetails">
                        <i class="bi bi-list-task"></i> View Report Details
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Required Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
